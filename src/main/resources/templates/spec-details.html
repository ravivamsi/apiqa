<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APIQA - API Specification Details</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        .sidebar {
            min-height: 100vh;
            background-color: #f8f9fa;
        }
        .main-content {
            padding: 20px;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            transition: transform 0.2s;
        }
        .status-badge {
            font-size: 0.8em;
        }
        
        /* Gherkin Syntax Highlighting */
        .gherkin-content {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .gherkin-keyword {
            color: #ffc107;
            font-weight: bold;
            background-color: rgba(255, 193, 7, 0.1);
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .gherkin-value {
            color: #28a745;
            font-weight: bold;
            background-color: rgba(40, 167, 69, 0.1);
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .gherkin-description {
            color: #212529;
        }
        
        .gherkin-comment {
            color: #6c757d;
            font-style: italic;
        }
        
        .gherkin-table {
            margin: 10px 0;
            border-collapse: collapse;
            width: 100%;
        }
        
        .gherkin-table th,
        .gherkin-table td {
            border: 1px solid #dee2e6;
            padding: 8px;
            text-align: left;
        }
        
        .gherkin-table th {
            background-color: #e9ecef;
            font-weight: bold;
        }
        
        .gherkin-table td {
            background-color: #ffffff;
        }
        
        .gherkin-examples {
            margin: 15px 0;
            padding: 10px;
            background-color: #f8f9fa;
            border-left: 4px solid #007bff;
        }
        
        .gherkin-scenario {
            margin: 10px 0;
            padding: 8px;
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
        }
        
        .gherkin-feature {
            margin: 10px 0;
            padding: 8px;
            background-color: #d1ecf1;
            border-left: 4px solid #17a2b8;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <div class="text-center mb-4">
                        <h4 class="text-primary">APIQA</h4>
                        <small class="text-muted">API Quality Analysis</small>
                    </div>
                    
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" th:href="@{/}">
                                <i class="bi bi-house-door"></i> Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" th:href="@{/specs}">
                                <i class="bi bi-file-earmark-code"></i> API Specs
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" th:href="@{/test-runs}">
                                <i class="bi bi-play-circle"></i> Test Runs
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" th:href="@{/admin}">
                                <i class="bi bi-gear"></i> Admin Panel
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
            
            <!-- Main content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 main-content">
                <!-- Alerts -->
                <div th:if="${param.success}" class="alert alert-success alert-dismissible fade show" role="alert">
                    <i class="bi bi-check-circle"></i> <span th:text="${param.success[0]}"></span>
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
                
                <div th:if="${param.error}" class="alert alert-danger alert-dismissible fade show" role="alert">
                    <i class="bi bi-exclamation-triangle"></i> <span th:text="${param.error[0]}"></span>
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
                
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2" th:text="${apiSpec.name}">API Specification</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <button type="button" class="btn btn-success me-2" th:onclick="'generateTests(' + ${apiSpec.id} + ')'">
                            <i class="bi bi-gear"></i> Generate Tests
                        </button>
                        <button type="button" class="btn btn-primary" th:onclick="'runTests(' + ${apiSpec.id} + ')'">
                            <i class="bi bi-play-circle"></i> Run Tests
                        </button>
                    </div>
                </div>
                
                <!-- API Spec Info -->
                <div class="row mb-4">
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Specification Details</h5>
                            </div>
                            <div class="card-body">
                                <dl class="row">
                                    <dt class="col-sm-3">Name:</dt>
                                    <dd class="col-sm-9" th:text="${apiSpec.name}">Spec Name</dd>
                                    
                                    <dt class="col-sm-3">Version:</dt>
                                    <dd class="col-sm-9">
                                        <span class="badge bg-secondary" th:text="${apiSpec.version}">v1.0.0</span>
                                    </dd>
                                    
                                    <dt class="col-sm-3">Description:</dt>
                                    <dd class="col-sm-9" th:text="${apiSpec.description}">Description</dd>
                                    
                                    <dt class="col-sm-3">Uploaded By:</dt>
                                    <dd class="col-sm-9" th:text="${apiSpec.uploadedBy}">User</dd>
                                    
                                    <dt class="col-sm-3">Uploaded At:</dt>
                                    <dd class="col-sm-9" th:text="${apiSpec.uploadedAt}">2023-01-01 12:00:00</dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Quick Actions</h5>
                            </div>
                            <div class="card-body">
                                <div class="d-grid gap-2">
                                    <button type="button" class="btn btn-success" th:onclick="'generateTests(' + ${apiSpec.id} + ')'">
                                        <i class="bi bi-gear"></i> Generate Tests
                                    </button>
                                    <button type="button" class="btn btn-primary" th:onclick="'runTests(' + ${apiSpec.id} + ')'">
                                        <i class="bi bi-play-circle"></i> Run Tests
                                    </button>
                                    <button type="button" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#yamlModal">
                                        <i class="bi bi-code-square"></i> View YAML
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Feature Files -->
                <div class="row mb-4" th:if="${apiSpec.featureFiles != null and !apiSpec.featureFiles.isEmpty()}">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Generated Feature Files</h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>File Name</th>
                                                <th>Suite Type</th>
                                                <th>Generated At</th>
                                                <th>Scenarios</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr th:each="feature : ${apiSpec.featureFiles}">
                                                <td th:text="${feature.fileName}">feature.feature</td>
                                                <td>
                                                    <span th:class="'badge ' + (${feature.suiteType.name()} == 'SMOKE' ? 'bg-success' : (${feature.suiteType.name()} == 'SYSTEM' ? 'bg-warning' : 'bg-info'))"
                                                          th:text="${feature.suiteType.name()}">SMOKE</span>
                                                </td>
                                                <td th:text="${feature.generatedAt}">2023-01-01 12:00</td>
                                                <td th:text="${feature.testScenarios != null ? feature.testScenarios.size() : 0}">0</td>
                                                <td>
                                                    <button type="button" class="btn btn-sm btn-outline-primary" 
                                                            th:data-file-name="${feature.fileName}"
                                                            th:data-content="${feature.content}"
                                                            onclick="viewFeature(this.dataset.fileName, this.dataset.content)">
                                                        <i class="bi bi-eye"></i> View
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Test Runs -->
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Test Runs</h5>
                            </div>
                            <div class="card-body">
                                <div th:if="${testRuns != null and !testRuns.isEmpty()}">
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Run Name</th>
                                                    <th>Type</th>
                                                    <th>Status</th>
                                                    <th>Started At</th>
                                                    <th>Duration</th>
                                                    <th>Results</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr th:each="run : ${testRuns}">
                                                    <td th:text="${run.runName}">Test Run</td>
                                                    <td>
                                                        <span class="badge bg-secondary" th:text="${run.runType.name()}">MANUAL</span>
                                                    </td>
                                                    <td>
                                                        <span th:class="'badge ' + (${run.status.name()} == 'COMPLETED' ? 'bg-success' : (${run.status.name()} == 'FAILED' ? 'bg-danger' : (${run.status.name()} == 'RUNNING' ? 'bg-warning' : 'bg-secondary')))"
                                                              th:text="${run.status.name()}">PENDING</span>
                                                    </td>
                                                    <td th:text="${run.startedAt != null ? run.startedAt : 'N/A'}">2023-01-01 12:00</td>
                                                    <td th:text="${run.completedAt != null and run.startedAt != null ? 
                                                                  run.completedAt + ' - ' + run.startedAt : 'N/A'}">N/A</td>
                                                    <td>
                                                        <span th:if="${run.totalTests != null}" class="badge bg-info" 
                                                              th:text="${run.passedTests} + '/' + ${run.totalTests}">0/0</span>
                                                    </td>
                                                    <td>
                                                        <a th:href="@{/test-runs/{id}(id=${run.id})}" class="btn btn-sm btn-outline-primary">
                                                            <i class="bi bi-eye"></i> View
                                                        </a>
                                                        <button th:if="${run.status.name() == 'FAILED'}" type="button" class="btn btn-sm btn-outline-warning ms-1" 
                                                                th:onclick="'retryTests(' + ${run.id} + ')'">
                                                            <i class="bi bi-arrow-clockwise"></i> Retry
                                                        </button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div th:if="${testRuns == null or testRuns.isEmpty()}" class="text-center text-muted py-3">
                                    <i class="bi bi-play-circle fs-1"></i>
                                    <p>No test runs yet. Generate and run tests to see results here.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- YAML Modal -->
                <div class="modal fade" id="yamlModal" tabindex="-1">
                    <div class="modal-dialog modal-xl">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">OpenAPI YAML</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <pre><code th:text="${apiSpec.openApiYaml}">YAML content here</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Feature Content Modal -->
                <div class="modal fade" id="featureModal" tabindex="-1">
                    <div class="modal-dialog modal-xl">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="featureModalTitle">
                                    <i class="bi bi-file-earmark-code"></i> Feature File
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <div class="gherkin-content" id="featureModalContent">
                                    <div class="text-center text-muted">
                                        <i class="bi bi-hourglass-split"></i>
                                        Loading feature content...
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                    <i class="bi bi-x-circle"></i> Close
                                </button>
                                <button type="button" class="btn btn-outline-primary" onclick="copyFeatureContent()">
                                    <i class="bi bi-clipboard"></i> Copy Content
                                </button>
                                <button type="button" class="btn btn-success" onclick="downloadFeatureFile()">
                                    <i class="bi bi-download"></i> Download
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Run Tests Modal -->
                <div class="modal fade" id="runTestsModal" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Run Tests</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <form th:action="@{/specs/{id}/run-tests(id=${apiSpec.id})}" method="post">
                                <div class="modal-body">
                                    <div class="mb-3">
                                        <label for="runName" class="form-label">Run Name</label>
                                        <input type="text" class="form-control" id="runName" name="runName" 
                                               th:value="'Test Run - ' + ${#dates.format(#dates.createNow(), 'yyyy-MM-dd HH:mm')}" required>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                    <button type="submit" class="btn btn-primary">Start Test Run</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Run Tests by Suite Modal -->
                <div class="modal fade" id="runTestsBySuiteModal" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Run Tests by Suite Type</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <form th:action="@{/specs/{id}/run-tests-by-suite(id=${apiSpec.id})}" method="post">
                                <div class="modal-body">
                                    <div class="mb-3">
                                        <label for="suiteRunName" class="form-label">Run Name</label>
                                        <input type="text" class="form-control" id="suiteRunName" name="runName" 
                                               th:value="'Test Run - ' + ${#dates.format(#dates.createNow(), 'yyyy-MM-dd HH:mm')}" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="suiteType" class="form-label">Select Suite Type</label>
                                        <select class="form-select" id="suiteType" name="suiteType" required>
                                            <option value="">Choose a suite type...</option>
                                            <option th:each="feature : ${apiSpec.featureFiles}" 
                                                    th:value="${feature.suiteType.name()}" 
                                                    th:text="${feature.suiteType.name()} + ' - ' + ${feature.fileName}">
                                                SMOKE - smoke_tests.feature
                                            </option>
                                        </select>
                                        <div class="form-text">
                                            <strong>SMOKE:</strong> Quick validation of basic API functionality<br>
                                            <strong>SYSTEM:</strong> Comprehensive testing of all CRUD operations<br>
                                            <strong>INTEGRATION:</strong> End-to-end workflow and integration tests
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                    <button type="submit" class="btn btn-primary">Start Suite Test Run</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        function generateTests(specId) {
            if (confirm('Generate test cases for this API specification?')) {
                fetch('/specs/' + specId + '/generate-tests', {
                    method: 'POST'
                }).then(response => {
                    if (response.ok) {
                        location.reload();
                    } else {
                        alert('Failed to generate tests');
                    }
                });
            }
        }
        
        function runTests(specId) {
            new bootstrap.Modal(document.getElementById('runTestsBySuiteModal')).show();
        }
        
        function retryTests(runId) {
            if (confirm('Retry failed tests for this run?')) {
                fetch('/test-runs/' + runId + '/retry', {
                    method: 'POST'
                }).then(response => {
                    if (response.ok) {
                        location.reload();
                    } else {
                        alert('Failed to retry tests');
                    }
                });
            }
        }
        
        // Store original content for download
        let currentFeatureContent = '';
        let currentFeatureFileName = '';
        
        function viewFeature(fileName, content) {
            currentFeatureFileName = fileName;
            currentFeatureContent = content;
            document.getElementById('featureModalTitle').innerHTML = '<i class="bi bi-file-earmark-code"></i> ' + fileName;
            document.getElementById('featureModalContent').innerHTML = highlightGherkin(content);
            new bootstrap.Modal(document.getElementById('featureModal')).show();
        }
        
        function highlightGherkin(content) {
            if (!content) return '<div class="text-muted">No content available</div>';
            
            // Gherkin keywords
            const keywords = [
                'Feature:', 'Background:', 'Scenario:', 'Scenario Outline:', 'Given', 'When', 'Then', 'And', 'But',
                'Examples:', 'Example:', '|', '@', '#', '"""', '```'
            ];
            
            // Split content into lines
            const lines = content.split('\n');
            let highlightedContent = '';
            let inTable = false;
            let inCodeBlock = false;
            let inFeature = false;
            let inScenario = false;
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];
                const trimmedLine = line.trim();
                
                // Skip empty lines
                if (trimmedLine === '') {
                    highlightedContent += '<br>';
                    continue;
                }
                
                // Handle comments
                if (trimmedLine.startsWith('#')) {
                    highlightedContent += '<div class="gherkin-comment">' + escapeHtml(line) + '</div>';
                    continue;
                }
                
                // Handle Feature
                if (trimmedLine.startsWith('Feature:')) {
                    inFeature = true;
                    highlightedContent += '<div class="gherkin-feature">';
                    highlightedContent += highlightLine(line, keywords);
                    highlightedContent += '</div>';
                    continue;
                }
                
                // Handle Scenario/Scenario Outline
                if (trimmedLine.startsWith('Scenario') || trimmedLine.startsWith('Background:')) {
                    inScenario = true;
                    highlightedContent += '<div class="gherkin-scenario">';
                    highlightedContent += highlightLine(line, keywords);
                    highlightedContent += '</div>';
                    continue;
                }
                
                // Handle Examples
                if (trimmedLine.startsWith('Examples:') || trimmedLine.startsWith('Example:')) {
                    highlightedContent += '<div class="gherkin-examples">';
                    highlightedContent += highlightLine(line, keywords);
                    highlightedContent += '</div>';
                    continue;
                }
                
                // Handle table rows
                if (trimmedLine.startsWith('|') && trimmedLine.endsWith('|')) {
                    if (!inTable) {
                        highlightedContent += '<table class="gherkin-table">';
                        inTable = true;
                    }
                    highlightedContent += '<tr>';
                    const cells = trimmedLine.split('|').slice(1, -1);
                    cells.forEach(cell => {
                        const cellContent = cell.trim();
                        if (cellContent) {
                            highlightedContent += '<td>' + highlightLine(cellContent, keywords) + '</td>';
                        } else {
                            highlightedContent += '<td></td>';
                        }
                    });
                    highlightedContent += '</tr>';
                    continue;
                } else if (inTable) {
                    highlightedContent += '</table>';
                    inTable = false;
                }
                
                // Handle code blocks
                if (trimmedLine.startsWith('"""') || trimmedLine.startsWith('```')) {
                    if (!inCodeBlock) {
                        highlightedContent += '<pre class="bg-light p-2 rounded"><code>';
                        inCodeBlock = true;
                    } else {
                        highlightedContent += '</code></pre>';
                        inCodeBlock = false;
                    }
                    continue;
                }
                
                // Regular lines
                if (inCodeBlock) {
                    highlightedContent += escapeHtml(line) + '<br>';
                } else {
                    highlightedContent += '<div class="gherkin-description">' + highlightLine(line, keywords) + '</div>';
                }
            }
            
            // Close any open table
            if (inTable) {
                highlightedContent += '</table>';
            }
            
            return highlightedContent;
        }
        
        function highlightLine(line, keywords) {
            let highlightedLine = escapeHtml(line);
            
            // Highlight keywords
            keywords.forEach(keyword => {
                const regex = new RegExp('\\b' + keyword.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + '\\b', 'gi');
                highlightedLine = highlightedLine.replace(regex, '<span class="gherkin-keyword">' + keyword + '</span>');
            });
            
            // Highlight values (quoted strings, numbers, etc.)
            highlightedLine = highlightedLine.replace(/"([^"]*)"/g, '<span class="gherkin-value">"$1"</span>');
            highlightedLine = highlightedLine.replace(/'([^']*)'/g, '<span class="gherkin-value">\'$1\'</span>');
            highlightedLine = highlightedLine.replace(/\b(\d+)\b/g, '<span class="gherkin-value">$1</span>');
            
            return highlightedLine;
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        function copyFeatureContent() {
            const content = document.getElementById('featureModalContent');
            const text = content.textContent || content.innerText;
            
            navigator.clipboard.writeText(text).then(() => {
                // Show success feedback
                const button = event.target;
                const originalText = button.innerHTML;
                button.innerHTML = '<i class="bi bi-check-circle"></i> Copied!';
                button.classList.remove('btn-outline-primary');
                button.classList.add('btn-success');
                
                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.classList.remove('btn-success');
                    button.classList.add('btn-outline-primary');
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy content: ', err);
                alert('Failed to copy content to clipboard');
            });
        }
        
        function downloadFeatureFile() {
            if (!currentFeatureContent) {
                alert('No feature content available to download');
                return;
            }
            
            // Prepare filename
            let fileName = currentFeatureFileName || 'feature';
            
            // Remove any existing extension and add .feature
            if (fileName.includes('.')) {
                fileName = fileName.substring(0, fileName.lastIndexOf('.')) + '.feature';
            } else {
                fileName = fileName + '.feature';
            }
            
            // Clean filename (remove invalid characters)
            fileName = fileName.replace(/[^a-zA-Z0-9._-]/g, '_');
            
            // Create blob with the feature content
            const blob = new Blob([currentFeatureContent], { type: 'text/plain;charset=utf-8' });
            
            // Create download link
            const url = window.URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = fileName;
            
            // Trigger download
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // Clean up
            window.URL.revokeObjectURL(url);
            
            // Show success feedback
            const button = event.target;
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="bi bi-check-circle"></i> Downloaded!';
            button.classList.remove('btn-success');
            button.classList.add('btn-outline-success');
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.classList.remove('btn-outline-success');
                button.classList.add('btn-success');
            }, 2000);
        }
    </script>
</body>
</html>